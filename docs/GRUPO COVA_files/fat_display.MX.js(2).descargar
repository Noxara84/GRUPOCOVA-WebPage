function _extends(){return(_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t}).apply(this,arguments)}function _defineProperty(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function _defineProperty(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}SK.React=SK.React||{},SK.React.Component=SK.React.Component||{},SK.React.Component.ContentEditable=SK.React.Component.ContentEditable||class extends React.Component{constructor(t){super(t),_defineProperty(this,"render_properties",{}),_defineProperty(this,"emitChange",()=>{var t=this.getDOMNode()[this.content_property];this.props.onChange&&t!==this.previous_html&&this.props.onChange({target:{value:t}}),this.previous_html=t}),this.state={content_type:this.props.html?"html":"text",content_editable:!1,content:(this.props.html?this.props.html:this.props.text)||" "},this.render_properties=Object.assign({},this.props,{html:void 0,text:void 0,custom_tag:void 0,onChange:void 0})}static getDerivedStateFromProps(t){return{content:t.html||t.text}}render(){const t=this.props.custom_tag||"div";return"html"==this.state.content_type?React.createElement(t,_extends({},this.render_properties,{onInput:this.emitChange,onBlur:this.emitChange,contentEditable:this.state.content_editable,dangerouslySetInnerHTML:{__html:this.state.content}})):React.createElement(t,_extends({},this.render_properties,{onInput:this.emitChange,onBlur:this.emitChange,contentEditable:this.state.content_editable}),this.state.content)}componentDidMount(){this.setState({content_editable:!!SK.Singletons.env.get("admin_mode")&&!SK.Singletons.env.get("sk_pro_preview")&&!SK.Util.isMobile()}),SK.UI&&SK.UI.Preview&&SK.UI.Preview.addEvents({onEnable:this.setState.bind(this,{content_editable:!1}),onDisable:this.setState.bind(this,{content_editable:!SK.Util.isMobile()})}),this.content_property="html"==this.state.content_type?"innerHTML":"innerText"in this.getDOMNode()?"innerText":"textContent"}shouldComponentUpdate(t,e){return t[this.state.content_type]!==this.getDOMNode()[this.content_property]||e.content_editable!==this.state.content_editable}getDOMNode(){return ReactDOM.findDOMNode(this)}},SK.Applications.GoogleMaps=SK.Applications.GoogleMaps||{},SK.Applications.GoogleMaps.Display=class extends SK.React.Component.Application.Display{constructor(t){super(t),_defineProperty(this,"elements",{}),_defineProperty(this,"map",null),_defineProperty(this,"marker",null),_defineProperty(this,"default_zoom_level",10),_defineProperty(this,"validateAddress",function(){}),this.state.Address=this.state.Address||[this.state.StreetAddress,this.state.City,this.state.Country].filter(t=>(t||"").trim()).join(", ").trim(),this.handleChange=this.handleChange.bind(this),this.changeDesctiption=this.changeDesctiption.bind(this),this.updateIframeData=this.updateIframeData.bind(this),this.__receiveMessage=this.__receiveMessage.bind(this)}render(){const t=this.getMapSrc();return React.createElement("div",{className:"sk-gm-wrapper "+this.state.Alignment},"right"==this.state.Alignment&&this.createContentEditableElement(),React.createElement("div",{className:"sk-gm-map-holder",style:{maxWidth:this.state.Width+"px"}},React.createElement("div",{className:"sk-gm-responsive-map",style:{paddingBottom:this.state.Height/this.state.Width*100+"%"}},React.createElement("iframe",{className:"sk-gm-template",onLoad:this.updateIframeData,src:t,ref:t=>this.elements.iframe=t}))),"left"==this.state.Alignment&&this.createContentEditableElement())}componentDidMount(){this.initOnMount()}createContentEditableElement(){return React.createElement(SK.React.Component.ContentEditable,{className:"sk-gm-description",text:this.state.Description,onChange:this.changeDesctiption})}getMapSrc(){const t=this.getGoogleAPI();return t?[SK.Singletons.env.get("static_image_server"),"/Apps/GoogleMaps/gmap.htm?api_key=",t,"&instance=",this.props.node_id,"&revision=",SK.Singletons.env.get("revision")].join(""):["https://maps.google.com/maps?q=",this.state.Address?encodeURIComponent(this.state.Address):this.state.LongitudeLatitude,"&t=&z=",this.state.ZoomLevel||this.default_zoom_level,"&ie=UTF8&iwloc=&output=embed"].join("")}initOnMount(){window.addEventListener("message",this.__receiveMessage,!1),this.updateIframeData()}updateIframeData(){this.getGoogleAPI()&&this.updateMap({action:"init",options:{__in_edit_mode:this.isInEditMode(),__origin:document.location.origin,ScrollToZoom:this.state.ScrollToZoom,ZoomLevel:this.state.ZoomLevel,LongitudeLatitude:this.state.LongitudeLatitude,Directions:this.state.Directions,__directions_strings:{directions_btn:"Instrucciones",search:"Buscar"}}})}__receiveMessage(t){if(this.getGoogleAPI()&&this.props.node_id==t.data.instance&&SK.Util.filterDomainName(t.origin)===SK.Util.filterDomainName(SK.Singletons.env.get("static_image_server")))switch(t.data.action){case"alert":alert("La solicitud de instrucciones fall√≥ debido a "+t.data.status+"");break;case"change":this.handleChange(t.data.name,t.data.value);break;case"display_address_callback":this.validateAddress(t.data.value)}}updateMap(t){this.getGoogleAPI()&&(this.elements.iframe||{}).contentWindow&&this.elements.iframe.contentWindow.postMessage(t,"*")}componentDidUpdate(t,e){this.updateMap({action:e.ScrollToZoom!=this.state.ScrollToZoom?"scrollwheel":"",options:this.state})}handleChange(t,e){this.setState({[t]:e})}displayAddress(t,e){this.validateAddress=e,this.updateMap({action:"display_address",address:t})}resizeMap(){this.updateMap({action:"resize"})}changeDesctiption(t){this.handleChange("Description",t.target.value)}getGoogleAPI(){return((this.state.__settings||{}).googleApiKey||"").trim()||(this.state.googleApiKey||"").trim()}autocompleteAPI(){return((this.state.__settings||{}).googleApiKey||"").trim()||SK.Singletons.env.get("resellerGoogleAutocompleteAPI")||(this.state.googleApiKey||"").trim()}};